(this["webpackJsonpreactwarriors-movie-app"]=this["webpackJsonpreactwarriors-movie-app"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),o=a.n(i),s=a(4),c=a(5),l=a(7),u=a(6),m=a(8),p=a(17),d=a(120),v=a(110),h=a(28),g=a(15),b=a(37),f=a.n(b),O="https://api.themoviedb.org/3",E="4237669ebd35e8010beee2f55fd45546",j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){fetch(e,t).then((function(e){if(e.status<400)return e.json();throw e})).then((function(e){a(e)})).catch((function(e){e.json().then((function(e){n(e)}))}))}))},y=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=void 0===a?{}:a,r=Object(g.a)({api_key:E},n);return j("".concat(O).concat(e,"?").concat(f.a.stringify(r)),{mode:"cors",headers:{"Content-type":"application/json"}})}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=void 0===a?{}:a,r=t.body,i=void 0===r?{}:r,o=Object(g.a)({api_key:E},n);return j("".concat(O).concat(e,"?").concat(f.a.stringify(o)),{method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(i)})}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=void 0===a?{}:a,r=t.body,i=void 0===r?{}:r,o=Object(g.a)({api_key:E},n);return j("".concat(O).concat(e,"?").concat(f.a.stringify(o)),{method:"DELETE",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(i)})}}]),e}(),_=function(e){var t={};return""===e.username&&(t.username="Not empty"),""===e.password&&(t.password="Required"),e.repeatPassword!==e.password&&(t.repeatPassword="Must be equal password"),t},w=a(11),k=a.n(w),C=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.labelText,n=e.type,i=e.placeholder,o=e.name,s=e.value,c=e.onChange,l=e.handleBlur,u=e.error;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("input",{type:n,className:k()("form-control",{invalid:u}),id:t,placeholder:i,name:o,value:s,onChange:c,onBlur:l}),u&&r.a.createElement("div",{className:"invalid-feedback"},u))}}]),t}(r.a.Component),N=function(e){return function(t){function a(){return Object(s.a)(this,a),Object(l.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,t),Object(c.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(ke.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t.props,a))}))}}]),a}(r.a.Component)},L=N(function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onChange=function(t){var a=t.target.name,n=t.target.value;e.setState((function(e){return{values:Object(g.a)({},e.values,Object(h.a)({},a,n)),errors:Object(g.a)({},e.errors,Object(h.a)({base:null},a,null))}}))},e.handleBlur=function(t){var a=t.target.name,n=_(e.state.values);Object.keys(n).length>0&&e.setState((function(e){return{errors:Object(g.a)({},e.errors,Object(h.a)({},a,n[a]))}}))},e.onSubmit=function(){var t=e.state.values,a=t.username,n=t.password,r=e.props,i=r.updateAuth,o=r.getFavoriteList,s=r.getWatchList,c=r.getUser,l=null;e.setState({submitting:!0}),y.get("/authentication/token/new").then((function(e){return y.post("/authentication/token/validate_with_login",{body:{username:a,password:n,request_token:e.request_token}})})).then((function(e){return y.post("/authentication/session/new",{body:{request_token:e.request_token}})})).then((function(e){return l=e.session_id,c(l)})).then((function(t){e.setState({submitting:!1},(function(){i(t,l)}))})).then((function(){o()})).then((function(){s()})).catch((function(t){e.setState({submitting:!1,errors:{base:t.status_message}})}))},e.onLogin=function(t){t.preventDefault();var a=_(e.state.values);Object.keys(a).length>0?e.setState((function(e){return{errors:Object(g.a)({},e.errors,{},a)}})):e.onSubmit()},e.state={values:{username:"belka",password:"zxcvbn",repeatPassword:"zxcvbn"},errors:{},submitting:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.values,a=t.username,n=t.password,i=t.repeatPassword,o=e.errors,s=e.submitting;return r.a.createElement("div",{className:"form-login-container"},r.a.createElement("form",{className:"form-login"},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal text-center"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement(C,{id:"username",labelText:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",type:"text",placeholder:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",name:"username",value:a,onChange:this.onChange,handleBlur:this.handleBlur,error:o.username}),r.a.createElement(C,{id:"password",labelText:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:n,onChange:this.onChange,handleBlur:this.handleBlur,error:o.password}),r.a.createElement(C,{id:"repeatPassword",labelText:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",name:"repeatPassword",value:i,onChange:this.onChange,handleBlur:this.handleBlur,error:o.repeatPassword}),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block",onClick:this.onLogin,disabled:s},"\u0412\u0445\u043e\u0434"),o.base&&r.a.createElement("div",{className:"invalid-feedback text-center"},o.base)))}}]),t}(r.a.Component)),P=function(e){return function(t){function a(){return Object(s.a)(this,a),Object(l.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,t),Object(c.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(Ce.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t.props,a))}))}}]),a}(r.a.Component)},S=P(function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showLoginModal,a=e.toggleLoginModal;return r.a.createElement("div",null,r.a.createElement("div",{className:"btn login-btn",onClick:a},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(d.a,{isOpen:t,toggle:a},r.a.createElement(v.a,null,r.a.createElement(L,null))))}}]),t}(r.a.Component)),F=a(111),M=a(121),D=a(112),A=a(113),x=N(P(function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).toggleDropdown=function(){e.setState((function(e){return{dropdownOpen:!e.dropdownOpen}}))},e.state={dropdownOpen:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.dropdownOpen,t=this.props,a=t.user,n=t.handleLogOut;return r.a.createElement(F.a,{isOpen:e,toggle:this.toggleDropdown},r.a.createElement(M.a,{tag:"div",onClick:this.toggleDropdown,"data-toggle":"dropdown","aria-expanded":e},r.a.createElement("img",{width:"40",className:"rounded-circle",src:"https://secure.gravatar.com/avatar/".concat(a.avatar.gravatar.hash,'.jpg?s=64"'),alt:"",onClick:this.toggleDropdown})),r.a.createElement(D.a,{right:!0},r.a.createElement(A.a,{onClick:n},"\u0412\u044b\u0439\u0442\u0438")))}}]),t}(r.a.Component))),I=N(function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(p.b,{to:"/",className:"nav-link"},r.a.createElement("span",null,"the movie db")))),e?r.a.createElement(x,null):r.a.createElement(S,null)))}}]),t}(r.a.Component)),T=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sort_by,a=e.onChangeFilter,n=e.options;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"sort_by"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e:"),r.a.createElement("select",{className:"form-control",id:"sort_by",name:"sort_by",value:t,onChange:a},n.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}))))}}]),t}(r.a.PureComponent);T.defaultProps={options:[{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",value:"popularity.desc"},{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043f\u043e \u0432\u043e\u0437\u0440\u043e\u0441\u0442\u0430\u043d\u0438\u044e",value:"popularity.asc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",value:"vote_average.desc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e \u0432\u043e\u0437\u0440\u043e\u0441\u0442\u0430\u043d\u0438\u044e",value:"vote_average.asc"}]};var U=function(){for(var e=[],t=2020;t>=2e3;t--)e.push(t);return e}(),W=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChangeFilter,a=e.primary_release_year;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"primary_release_year"},"\u0413\u043e\u0434 \u0440\u0435\u043b\u0438\u0437\u0430:"),r.a.createElement("select",{className:"form-control",id:"primary_release_year",name:"primary_release_year",value:a,onChange:t},r.a.createElement("option",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0434"),U.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))))}}]),t}(r.a.PureComponent),B=a(59),R=function(e){var t=e.genres,a=e.with_genres,n=e.onChangeGenres;return r.a.createElement("div",{className:"filters__form-genres genres"},r.a.createElement("div",{className:"genres__choice"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0436\u0430\u043d\u0440:"),t.map((function(e){return r.a.createElement("div",{className:"form-check",key:e.id},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"genre-".concat(e.id),name:"with_genres",checked:a.includes(String(e.id)),value:e.id,onChange:n}),r.a.createElement("label",{className:"form-check-label",htmlFor:"genre-".concat(e.id)},e.name))})))};R.defaultProps={genres:[],with_genres:[]};var V,q=(V=R,function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onChangeGenres=function(t){var a=e.props.with_genres,n=t.target.checked,r=t.target.value;e.props.onChangeFilter({target:{name:"with_genres",value:n?[].concat(Object(B.a)(a),[r]):a.filter((function(e){return Number(e)!==Number(r)}))}})},e.state={genres:[]},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.get("/genre/movie/list",{params:{language:"ru-RU"}}).then((function(t){e.setState({genres:t.genres})}))}},{key:"render",value:function(){var e=this.state.genres,t=this.props.with_genres;return r.a.createElement(V,{genres:e,with_genres:t,onChangeGenres:this.onChangeGenres})}}]),t}(r.a.PureComponent)),G=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChangePagination,a=e.page,n=e.total_pages;return r.a.createElement("div",null,r.a.createElement("div",{className:"btn-group btn-pagination"},r.a.createElement("button",{type:"button",className:"btn mr-2",disabled:1===a,onClick:t.bind(null,a-1,n)},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement("button",{type:"button",className:"btn",onClick:t.bind(null,a+1,n)},"\u0412\u043f\u0435\u0440\u0435\u0434")),r.a.createElement("div",{className:"page-pagination"},a," \u0438\u0437 ",n))}}]),t}(r.a.PureComponent),H=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filters,a=t.sort_by,n=t.primary_release_year,i=t.with_genres,o=e.pagination,s=o.page,c=o.total_pages,l=e.onChangeFilter,u=e.onChangePagination,m=e.onReset;return r.a.createElement("form",{className:"filters__form"},r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn clear-btn",onClick:m},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b")),r.a.createElement(T,{onChangeFilter:l,sort_by:a}),r.a.createElement(W,{onChangeFilter:l,primary_release_year:n}),r.a.createElement(q,{onChangeFilter:l,with_genres:i}),r.a.createElement(G,{onChangePagination:u,page:s,total_pages:c}))}}]),t}(r.a.Component),J=a(114),z=a(115),$=N(P(function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).markAsFavorite=function(){var t=e.props,a=t.user,n=t.session_id,r=t.movieId,i=t.favorite_movies,o=t.getFavoriteList,s=t.toggleLoginModal;n?e.setState({isLoading:!0},(function(){y.post("/account/".concat(a.id,"/favorite"),{params:{session_id:n},body:{media_type:"movie",media_id:r,favorite:!e.getCurrentFavorite(i,r)}}).then((function(){o().then((function(){e.setState({isLoading:!1})}))}))})):s()},e.getCurrentFavorite=function(e,t){return e.some((function(e){return e.id===t}))},e.state={isLoading:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.isLoading,t=this.props,a=t.favorite_movies,n=t.movieId,i=this.getCurrentFavorite(a,n);return r.a.createElement("div",{className:"d-inline-flex mark-favorite",onClick:this.markAsFavorite,style:{pointerEvents:e?"none":"auto"}},i?r.a.createElement(J.a,null):r.a.createElement(z.a,null))}}]),t}(r.a.PureComponent))),K=a(116),Q=a(117),X=N(P(function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).addToWatchList=function(){var t=e.props,a=t.user,n=t.session_id,r=t.movieId,i=t.watchlist,o=t.getWatchList,s=t.toggleLoginModal;n?e.setState({isLoading:!0},(function(){y.post("/account/".concat(a.id,"/watchlist"),{params:{session_id:n},body:{media_type:"movie",media_id:r,watchlist:!e.getCurrentWatchList(i,r)}}).then((function(){o().then((function(){e.setState({isLoading:!1})}))}))})):s()},e.getCurrentWatchList=function(e,t){return e.some((function(e){return e.id===t}))},e.state={isLoading:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.isLoading,t=this.props,a=t.watchlist,n=t.movieId,i=this.getCurrentWatchList(a,n);return r.a.createElement("div",{className:"d-inline-flex mark-watch",onClick:this.addToWatchList,style:{pointerEvents:e?"none":"auto"}},i?r.a.createElement(K.a,null):r.a.createElement(Q.a,null))}}]),t}(r.a.PureComponent))),Y=a(61),Z=a(56),ee=a.n(Z),te=function(e){var t=e.path,a=Object(Y.a)(e,["path"]);return t?r.a.createElement("img",Object.assign({src:"https://image.tmdb.org/t/p/w500".concat(t)},a,{alt:""})):r.a.createElement("img",Object.assign({src:ee.a},a,{alt:""}))},ae=a(44),ne=(a(94),function(e){var t=10*e.vote_average,a=t>70?"#21D07A":"#D0D331";return r.a.createElement(ae.a,{value:t,text:"".concat(t,"%"),background:!0,backgroundPadding:6,styles:Object(ae.b)({backgroundColor:"#081c24",textColor:"#fff",pathColor:a,trailColor:"transparent"})})}),re=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.item;return r.a.createElement("div",{className:"card "},r.a.createElement("div",{className:"card-body card-movie"},r.a.createElement("div",{className:"card-movie__img"},r.a.createElement(p.b,{to:"/movie/".concat(e.id,"/details")},r.a.createElement(te,{className:"card-img-top card-img--height",alt:"",path:e.poster_path||e.backdrop_path}))),r.a.createElement("div",{className:"card-movie__description"},r.a.createElement("div",{className:"card-movie__icons"},r.a.createElement(ne,{vote_average:e.vote_average}),r.a.createElement($,{movieId:e.id}),r.a.createElement(X,{movieId:e.id})),r.a.createElement(p.b,{className:"card-title card-movie__name",to:"/movie/".concat(e.id,"/details")},e.title),r.a.createElement("div",{className:"card-movie__details"},r.a.createElement(p.b,{to:"/movie/".concat(e.id,"/details")},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")))))}}]),t}(r.a.PureComponent),ie=a(45),oe=a.n(ie),se=function(e){var t=e.movies;return r.a.createElement("div",{className:"row"},t.map((function(e){return r.a.createElement("div",{key:e.id,className:"col-6 mb-4"},r.a.createElement(re,{item:e}))})))};se.defaultProps={movies:[]};var ce=function(e){return function(t){function a(){var e;return Object(s.a)(this,a),(e=Object(l.a)(this,Object(u.a)(a).call(this))).getMovies=function(t,a){var n=t.sort_by,r=t.primary_release_year,i=t.with_genres,o={language:"ru-RU",sort_by:n,page:a,primary_release_year:r,with_genres:i};y.get("/discover/movie",{params:o}).then((function(t){e.props.onChangePagination(a,t.total_pages),e.setState({movies:t.results})}))},e.state={movies:[]},e}return Object(m.a)(a,t),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getMovies(this.props.filters,this.props.pagination.page)}},{key:"componentDidUpdate",value:function(e){oe.a.isEqual(this.props.filters,e.filters)||this.getMovies(this.props.filters,1),oe.a.isEqual(this.props.pagination,e.pagination)||this.getMovies(this.props.filters,this.props.pagination.page)}},{key:"render",value:function(){var t=this.state.movies;return r.a.createElement(e,{movies:t})}}]),a}(r.a.Component)}(se),le=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onChangeFilter=function(t){var a=t.target.name,n=t.target.value;e.setState((function(e){return{filters:Object(g.a)({},e.filters,Object(h.a)({},a,n))}}))},e.onChangePagination=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.state.pagination.total_pages;e.setState((function(e){return{pagination:Object(g.a)({},e.pagination,{page:t,total_pages:a})}}))},e.onReset=function(){e.setState(Object(g.a)({},e.initialState))},e.initialState={filters:{sort_by:"popularity.desc",primary_release_year:"",with_genres:[]},pagination:{page:1,total_pages:1}},e.state=Object(g.a)({},e.initialState),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.filters,a=e.pagination;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-3"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body filters"},r.a.createElement("h3",{className:"filters__title"},"\u0424\u0438\u043b\u044c\u0442\u0440\u044b:"),r.a.createElement(H,{filters:t,pagination:a,onChangeFilter:this.onChangeFilter,onChangePagination:this.onChangePagination,onReset:this.onReset})))),r.a.createElement("div",{className:"col-9"},r.a.createElement(ce,{filters:t,pagination:a,onChangePagination:this.onChangePagination}))))}}]),t}(r.a.Component),ue=a(30),me=[{link:"\u0414\u0435\u0442\u0430\u043b\u0438",path:"details"},{link:"\u0412\u0438\u0434\u0435\u043e",path:"videos"},{link:"\u0410\u043a\u0442\u0435\u0440\u044b",path:"actors"}],pe=Object(ue.f)((function(e){var t=e.match;return r.a.createElement("ul",{className:"nav nav-tabs movie-tabs"},me.map((function(e,a){return r.a.createElement("li",{className:"nav-item movie-tabs__item",key:a},r.a.createElement(p.c,{to:"".concat(t.url,"/").concat(e.path),className:"nav-link"},e.link))})))})),de=a(118),ve=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.movieDetails,t=[{name:"\u0421\u0442\u0430\u0442\u0443\u0441",value:e.status},{name:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430",value:e.release_date},{name:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"".concat(e.runtime,"\u043c\u0438\u043d\u0443\u0442")},{name:"\u042f\u0437\u044b\u043a \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u0430",value:e.original_language},{name:"\u0421\u0442\u0440\u0430\u043d\u0430",value:e.production_countries.map((function(e){return e.name}))},{name:"\u0411\u044e\u0434\u0436\u0435\u0442",value:"".concat(e.budget,"$")},{name:"\u0421\u0431\u043e\u0440\u044b",value:"".concat(e.revenue,"$")},{name:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",value:e.production_companies.map((function(e){return e.name}))},{name:"\u0416\u0430\u043d\u0440\u044b",value:e.genres.map((function(e){return e.name}))}];return r.a.createElement(de.a,null,r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"row"},e.name),r.a.createElement("td",null,"".concat(e.value)))}))))}}]),t}(r.a.Component);ve.defaultProps={movieDetails:{production_countries:[],production_companies:[],genres:[]}};var he=a(119),ge=function(){return r.a.createElement("div",{className:"row justify-content-center mt-4"},r.a.createElement("div",{className:"col-3"},r.a.createElement(he.a,{color:"primary"})))},be=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={movieVideos:[],isLoading:!0},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;y.get("/movie/".concat(t.id,"/videos")).then((function(t){e.setState({movieVideos:t.results,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.movieVideos;return e.isLoading?r.a.createElement(ge,null):r.a.createElement("div",{className:"row"},t.map((function(e){return r.a.createElement("div",{className:"col-6",key:e.id},r.a.createElement("iframe",{title:"video",width:"100%",height:"260",src:"https://www.youtube.com/embed/".concat(e.key),frameBorder:"0",allowFullScreen:!0}))})))}}]),t}(r.a.Component),fe=Object(ue.f)(be),Oe=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={movieActors:[],isLoading:!0},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;y.get("/movie/".concat(t.id,"/credits")).then((function(t){e.setState({movieActors:t,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.movieActors;return e.isLoading?r.a.createElement(ge,null):r.a.createElement("div",{className:"row movie-actors"},t.cast.map((function(e){return e.profile_path&&r.a.createElement("div",{key:e.id,className:"col-3 movie-actors__item"},r.a.createElement(te,{alt:"",path:e.profile_path}),r.a.createElement("div",{className:"movie-actors__name"},r.a.createElement("h3",null,e.name),r.a.createElement("span",null,e.character)))})))}}]),t}(r.a.Component),Ee=Object(ue.f)(Oe),je=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.movieDetails;return r.a.createElement("section",{className:"movie-details"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center mt-4"},r.a.createElement("div",{className:"col-10"},r.a.createElement(pe,null),r.a.createElement("div",{className:"content"},r.a.createElement(ue.c,null,r.a.createElement(ue.a,{path:"/movie/:id/details"},r.a.createElement(ve,{movieDetails:e})),r.a.createElement(ue.a,{path:"/movie/:id/videos",component:fe}),r.a.createElement(ue.a,{path:"/movie/:id/actors",component:Ee})))))))}}]),t}(r.a.Component),ye=function(e){var t=e.title,a=e.overview,n=e.vote_average,i=e.movieId;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,t),r.a.createElement("div",{className:"movie-overwiew__mark"},r.a.createElement(ne,{vote_average:n}),r.a.createElement($,{movieId:i}),r.a.createElement(X,{movieId:i})),r.a.createElement("p",null,a))},_e=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={movieDetails:[],isLoading:!0},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;y.get("/movie/".concat(t.id),{params:{language:"ru-RU"}}).then((function(t){e.setState({movieDetails:t,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.movieDetails,a=e.isLoading,n="https://image.tmdb.org/t/p/w500".concat(t.backdrop_path);return a?r.a.createElement(ge,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"movie-overview",style:{backgroundImage:"url(".concat(n,")")}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-4"},r.a.createElement(te,{path:t.poster_path,width:"100%",alt:""})),r.a.createElement("div",{className:"col-6"},r.a.createElement(ye,{title:t.title,overview:t.overview,vote_average:t.vote_average,movieId:t.id}))))),r.a.createElement(je,{movieDetails:t}))}}]),t}(r.a.Component),we=a(36),ke=r.a.createContext(),Ce=r.a.createContext(),Ne=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleLogOut=function(){var e=a.props.session_id;y.delete("/authentication/session",{body:{session_id:e}}).then((function(){a.props.onLogOut()}))},a.getFavoriteList=function(){var e=a.props,t=e.session_id,n=e.user;return y.get("/account/".concat(n.id,"/favorite/movies"),{params:{session_id:t}}).then((function(e){var t=e.results;a.props.updateFavoriteList(t)}))},a.getWatchList=function(){var e=a.props,t=e.session_id,n=e.user;return y.get("/account/".concat(n.id,"/watchlist/movies"),{params:{session_id:t}}).then((function(e){var t=e.results;a.props.updateWatchList(t)}))},a.getUser=function(e){return y.get("/account",{params:{session_id:e}})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.session_id;t&&this.getUser(t).then((function(a){e.props.updateAuth(a,t),e.getFavoriteList(),e.getWatchList()}))}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.session_id,n=e.watchlist,i=e.showLoginModal,o=e.favorite_movies,s=e.updateAuth,c=e.toggleLoginModal;return r.a.createElement(p.a,{basename:"/reactwarriors-movie-app"},r.a.createElement(ke.Provider,{value:{user:t,updateAuth:s,getUser:this.getUser,favorite_movies:o,getFavoriteList:this.getFavoriteList,watchlist:n,getWatchList:this.getWatchList}},r.a.createElement(Ce.Provider,{value:{session_id:a,handleLogOut:this.handleLogOut,showLoginModal:i,toggleLoginModal:c}},r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement(ue.a,{exact:!0,path:"/",component:le}),r.a.createElement(ue.a,{path:"/movie/:id",component:_e})))))}}]),t}(r.a.Component),Le=Object(we.b)((function(e){return{user:e.auth.user,session_id:e.auth.session_id,showLoginModal:e.auth.showLoginModal,favorite_movies:e.movies.favorite_movies,watchlist:e.movies.watchlist}}),(function(e){return{updateAuth:function(t,a){return e({type:"UPDATE_AUTH",payload:{user:t,session_id:a}})},toggleLoginModal:function(){return e({type:"LOGINMODAL"})},updateFavoriteList:function(t){return e({type:"FAVORITEMOVIES",payload:{favorite_movies:t}})},updateWatchList:function(t){return e({type:"WATCHMOVIES",payload:{watchlist:t}})},onLogOut:function(){return e({type:"LOGOUT"})}}}))(Ne),Pe=(a(98),a(99),a(33)),Se=new(a(60).a),Fe={user:null,session_id:Se.get("session_id"),showLoginModal:!1},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_AUTH":return Se.set("session_id",t.payload.session_id,{path:"/",maxAge:2592e3}),Object(g.a)({},e,{user:t.payload.user,session_id:t.payload.session_id});case"LOGOUT":return Se.remove("session_id"),{initialState:Fe};case"LOGINMODAL":return Object(g.a)({},e,{showLoginModal:!e.showLoginModal});default:return e}},De={favorite_movies:[],watchlist:[]},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FAVORITEMOVIES":return Object(g.a)({},e,{favorite_movies:t.payload.favorite_movies});case"WATCHMOVIES":return Object(g.a)({},e,{watchlist:t.payload.watchlist});default:return e}},xe=Object(Pe.b)({auth:Me,movies:Ae}),Ie=Object(Pe.c)(xe);o.a.render(r.a.createElement(we.a,{store:Ie},r.a.createElement(Le,null)),document.getElementById("root"))},56:function(e,t,a){e.exports=a.p+"static/media/default-image.11075626.png"},64:function(e,t,a){e.exports=a(100)},99:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.b8d49fd4.chunk.js.map