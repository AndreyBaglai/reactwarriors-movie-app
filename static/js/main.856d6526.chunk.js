(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{55:function(e,t,a){e.exports=a(88)},87:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(28),o=a.n(i),s=a(14),c=a(5),l=a(4),u=a(7),m=a(6),d=a(8),p=a(108),h=a(98),v=a(26),g=a(33),b=a.n(g),f="https://api.themoviedb.org/3",O="4237669ebd35e8010beee2f55fd45546",j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(a,n){fetch(e,t).then(function(e){if(e.status<400)return e.json();throw e}).then(function(e){a(e)}).catch(function(e){e.json().then(function(e){n(e)})})})},E=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"get",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).params,a=void 0===t?{}:t,n=Object(s.a)({api_key:O},a);return j("".concat(f).concat(e,"?").concat(b.a.stringify(n)),{mode:"cors",headers:{"Content-type":"application/json"}})}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=void 0===a?{}:a,r=t.body,i=void 0===r?{}:r,o=Object(s.a)({api_key:O},n);return j("".concat(f).concat(e,"?").concat(b.a.stringify(o)),{method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(i)})}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=void 0===a?{}:a,r=t.body,i=void 0===r?{}:r,o=Object(s.a)({api_key:O},n);return j("".concat(f).concat(e,"?").concat(b.a.stringify(o)),{method:"DELETE",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(i)})}}]),e}(),y=function(e){var t={};return""===e.username&&(t.username="Not empty"),""===e.password&&(t.password="Required"),e.repeatPassword!==e.password&&(t.repeatPassword="Must be equal password"),t},_=a(11),w=a.n(_),k=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.labelText,n=e.type,i=e.placeholder,o=e.name,s=e.value,c=e.onChange,l=e.handleBlur,u=e.error;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("input",{type:n,className:w()("form-control",{invalid:u}),id:t,placeholder:i,name:o,value:s,onChange:c,onBlur:l}),u&&r.a.createElement("div",{className:"invalid-feedback"},u))}}]),t}(r.a.Component),C=function(e){return function(t){function a(){return Object(c.a)(this,a),Object(u.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(d.a)(a,t),Object(l.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(Ee.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t.props,a))})}}]),a}(r.a.Component)},N=function(e){return function(t){function a(){return Object(c.a)(this,a),Object(u.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(d.a)(a,t),Object(l.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(ye.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t.props,a))})}}]),a}(r.a.Component)},L=C(N(function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).onChange=function(t){var a=t.target.name,n=t.target.value;e.setState(function(e){return{values:Object(s.a)({},e.values,Object(v.a)({},a,n)),errors:Object(s.a)({},e.errors,Object(v.a)({base:null},a,null))}})},e.handleBlur=function(t){var a=t.target.name,n=y(e.state.values);Object.keys(n).length>0&&e.setState(function(e){return{errors:Object(s.a)({},e.errors,Object(v.a)({},a,n[a]))}}),console.log("on blur")},e.onSubmit=function(){var t=e.state.values,a=t.username,n=t.password,r=e.props,i=r.updateUser,o=r.updateSessionId,s=r.getFavoriteList,c=r.getWatchList,l=r.getUser;e.setState({submitting:!0}),E.get("/authentication/token/new").then(function(e){return E.post("/authentication/token/validate_with_login",{body:{username:a,password:n,request_token:e.request_token}})}).then(function(e){return E.post("/authentication/session/new",{body:{request_token:e.request_token}})}).then(function(e){return o(e.session_id),l(e.session_id)}).then(function(t){e.setState({submitting:!1},function(){i(t)})}).then(function(){s()}).then(function(){c()}).catch(function(t){console.log("error",t),e.setState({submitting:!1,errors:{base:t.status_message}})})},e.onLogin=function(t){t.preventDefault();var a=y(e.state.values);Object.keys(a).length>0?e.setState(function(e){return{errors:Object(s.a)({},e.errors,a)}}):e.onSubmit()},e.state={values:{username:"belka",password:"zxcvbn",repeatPassword:"zxcvbn"},errors:{},submitting:!1},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.values,a=t.username,n=t.password,i=t.repeatPassword,o=e.errors,s=e.submitting;return r.a.createElement("div",{className:"form-login-container"},r.a.createElement("form",{className:"form-login"},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal text-center"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement(k,{id:"username",labelText:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",type:"text",placeholder:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",name:"username",value:a,onChange:this.onChange,handleBlur:this.handleBlur,error:o.username}),r.a.createElement(k,{id:"password",labelText:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:n,onChange:this.onChange,handleBlur:this.handleBlur,error:o.password}),r.a.createElement(k,{id:"repeatPassword",labelText:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",name:"repeatPassword",value:i,onChange:this.onChange,handleBlur:this.handleBlur,error:o.repeatPassword}),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block",onClick:this.onLogin,disabled:s},"\u0412\u0445\u043e\u0434"),o.base&&r.a.createElement("div",{className:"invalid-feedback text-center"},o.base)))}}]),t}(r.a.Component))),S=N(function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showLoginModal,a=e.toggleLoginModal;return r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-success",type:"button",onClick:a},"Login"),r.a.createElement(p.a,{isOpen:t,toggle:a},r.a.createElement(h.a,null,r.a.createElement(L,null))))}}]),t}(r.a.Component)),P=a(99),F=a(109),M=a(100),x=a(101),D=C(N(function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).toggleDropdown=function(){e.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})},e.state={dropdownOpen:!1},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.dropdownOpen,t=this.props,a=t.user,n=t.handleLogOut;return r.a.createElement(P.a,{isOpen:e,toggle:this.toggleDropdown},r.a.createElement(F.a,{tag:"div",onClick:this.toggleDropdown,"data-toggle":"dropdown","aria-expanded":e},r.a.createElement("img",{width:"40",className:"rounded-circle",src:"https://secure.gravatar.com/avatar/".concat(a.avatar.gravatar.hash,'.jpg?s=64"'),alt:"",onClick:this.toggleDropdown})),r.a.createElement(M.a,{right:!0},r.a.createElement(x.a,{onClick:n},"\u0412\u044b\u0439\u0442\u0438")))}}]),t}(r.a.Component))),U=C(function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("nav",{className:"navbar navbar-dark bg-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("a",{href:"#",className:"nav-link"},"Home"))),e?r.a.createElement(D,null):r.a.createElement(S,null)))}}]),t}(r.a.Component)),I=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sort_by,a=e.onChangeFilter,n=e.options;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"sort_by"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e:"),r.a.createElement("select",{className:"form-control",id:"sort_by",name:"sort_by",value:t,onChange:a},n.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))}}]),t}(r.a.PureComponent);I.defaultProps={options:[{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",value:"popularity.desc"},{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043f\u043e \u0432\u043e\u0437\u0440\u043e\u0441\u0442\u0430\u043d\u0438\u044e",value:"popularity.asc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",value:"vote_average.desc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e \u0432\u043e\u0437\u0440\u043e\u0441\u0442\u0430\u043d\u0438\u044e",value:"vote_average.asc"}]};var B=function(){for(var e=[],t=2019;t>=2e3;t--)e.push(t);return e}(),W=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChangeFilter,a=e.primary_release_year;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"primary_release_year"},"\u0413\u043e\u0434 \u0440\u0435\u043b\u0438\u0437\u0430:"),r.a.createElement("select",{className:"form-control",id:"primary_release_year",name:"primary_release_year",value:a,onChange:t},r.a.createElement("option",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0434"),B.map(function(e){return r.a.createElement("option",{value:e,key:e},e)})))}}]),t}(r.a.PureComponent),q=a(52),R=function(e){var t=e.genres,a=e.with_genres,n=e.onChangeGenres;return r.a.createElement("div",null,r.a.createElement("div",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0436\u0430\u043d\u0440:"),t.map(function(e){return r.a.createElement("div",{className:"form-check",key:e.id},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"genre-".concat(e.id),name:"with_genres",checked:a.includes(String(e.id)),value:e.id,onChange:n}),r.a.createElement("label",{className:"form-check-label",htmlFor:"genre-".concat(e.id)},e.name))}))};R.defaultProps={genres:[],with_genres:[]};var T,A=(T=R,function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).onChangeGenres=function(t){var a=e.props.with_genres,n=t.target.checked,r=t.target.value;e.props.onChangeFilter({target:{name:"with_genres",value:n?[].concat(Object(q.a)(a),[r]):a.filter(function(e){return Number(e)!==Number(r)})}})},e.state={genres:[]},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.get("/genre/movie/list",{params:{language:"ru-RU"}}).then(function(t){e.setState({genres:t.genres})})}},{key:"render",value:function(){var e=this.state.genres,t=this.props.with_genres;return r.a.createElement(T,{genres:e,with_genres:t,onChangeGenres:this.onChangeGenres})}}]),t}(r.a.PureComponent)),G=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChangePagination,a=e.page,n=e.total_pages;return r.a.createElement("div",null,r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-light mr-2",disabled:1===a,onClick:t.bind(null,a-1,n)},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement("button",{type:"button",className:"btn btn-light",onClick:t.bind(null,a+1,n)},"\u0412\u043f\u0435\u0440\u0435\u0434")),r.a.createElement("div",null,a," of ",n))}}]),t}(r.a.PureComponent),J=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filters,a=t.sort_by,n=t.primary_release_year,i=t.with_genres,o=e.pagination,s=o.page,c=o.total_pages,l=e.onChangeFilter,u=e.onChangePagination,m=e.onReset;return r.a.createElement("form",{className:"mb-3"},r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-light",onClick:m},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b")),r.a.createElement(I,{onChangeFilter:l,sort_by:a}),r.a.createElement(W,{onChangeFilter:l,primary_release_year:n}),r.a.createElement(A,{onChangeFilter:l,with_genres:i}),r.a.createElement(G,{onChangePagination:u,page:s,total_pages:c}))}}]),t}(r.a.Component),V=a(102),z=a(103),$=C(N(function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).markAsFavorite=function(){var t=e.props,a=t.user,n=t.session_id,r=t.movieId,i=t.favorite_movies,o=t.getFavoriteList,s=t.toggleLoginModal;n?e.setState({isLoading:!0},function(){E.post("/account/".concat(a.id,"/favorite"),{params:{session_id:n},body:{media_type:"movie",media_id:r,favorite:!e.getCurrentFavorite(i,r)}}).then(function(){o().then(function(){e.setState({isLoading:!1})})})}):s()},e.getCurrentFavorite=function(e,t){return e.some(function(e){return e.id===t})},e.state={isLoading:!1},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.isLoading,t=this.props,a=t.favorite_movies,n=t.movieId,i=this.getCurrentFavorite(a,n);return r.a.createElement("div",{className:"d-inline-flex",onClick:this.markAsFavorite,style:{pointerEvents:e?"none":"auto"}},i?r.a.createElement(V.a,null):r.a.createElement(z.a,null))}}]),t}(r.a.PureComponent))),H=a(104),K=a(105),Q=C(N(function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).addToWatchList=function(){var t=e.props,a=t.user,n=t.session_id,r=t.movieId,i=t.watchlist,o=t.getWatchList,s=t.toggleLoginModal;n?e.setState({isLoading:!0},function(){E.post("/account/".concat(a.id,"/watchlist"),{params:{session_id:n},body:{media_type:"movie",media_id:r,watchlist:!e.getCurrentWatchList(i,r)}}).then(function(){o().then(function(){e.setState({isLoading:!1})})})}):s()},e.getCurrentWatchList=function(e,t){return e.some(function(e){return e.id===t})},e.state={isLoading:!1},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.isLoading,t=this.props,a=t.watchlist,n=t.movieId,i=this.getCurrentWatchList(a,n);return r.a.createElement("div",{className:"d-inline-flex",onClick:this.addToWatchList,style:{pointerEvents:e?"none":"auto"}},i?r.a.createElement(H.a,null):r.a.createElement(K.a,null))}}]),t}(r.a.PureComponent))),X=a(20),Y=a(51),Z=function(e){var t=e.path,a=Object(Y.a)(e,["path"]);return r.a.createElement("img",Object.assign({src:"https://image.tmdb.org/t/p/w500".concat(t)},a))},ee=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.item;return r.a.createElement("div",{className:"card",style:{width:"100%"}},r.a.createElement(Z,{className:"card-img-top card-img--height",alt:"",path:e.backdrop_path||e.poster_path}),r.a.createElement("div",{className:"card-body"},r.a.createElement(X.b,{className:"card-title",to:"/movie/".concat(e.id,"/details")},e.title),r.a.createElement("div",{className:"card-text"},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",e.vote_average),r.a.createElement($,{movieId:e.id}),r.a.createElement(Q,{movieId:e.id})))}}]),t}(r.a.PureComponent),te=a(41),ae=a.n(te),ne=function(e){var t=e.movies;return r.a.createElement("div",{className:"row"},t.map(function(e){return r.a.createElement("div",{key:e.id,className:"col-6 mb-4"},r.a.createElement(ee,{item:e}))}))};ne.defaultProps={movies:[]};var re=function(e){return function(t){function a(){var e;return Object(c.a)(this,a),(e=Object(u.a)(this,Object(m.a)(a).call(this))).getMovies=function(t,a){var n=t.sort_by,r=t.primary_release_year,i=t.with_genres,o={language:"ru-RU",sort_by:n,page:a,primary_release_year:r,with_genres:i};E.get("/discover/movie",{params:o}).then(function(t){e.props.onChangePagination(a,t.total_pages),e.setState({movies:t.results})})},e.state={movies:[]},e}return Object(d.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getMovies(this.props.filters,this.props.pagination.page)}},{key:"componentDidUpdate",value:function(e){ae.a.isEqual(this.props.filters,e.filters)||this.getMovies(this.props.filters,1),ae.a.isEqual(this.props.pagination,e.pagination)||this.getMovies(this.props.filters,this.props.pagination.page)}},{key:"render",value:function(){var t=this.state.movies;return r.a.createElement(e,{movies:t})}}]),a}(r.a.Component)}(ne),ie=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).onChangeFilter=function(t){var a=t.target.name,n=t.target.value;e.setState(function(e){return{filters:Object(s.a)({},e.filters,Object(v.a)({},a,n))}})},e.onChangePagination=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.state.pagination.total_pages;e.setState(function(e){return{pagination:Object(s.a)({},e.pagination,{page:t,total_pages:a})}})},e.onReset=function(){e.setState(Object(s.a)({},e.initialState))},e.initialState={filters:{sort_by:"vote_average.desc",primary_release_year:"",with_genres:[]},pagination:{page:1,total_pages:1}},e.state=Object(s.a)({},e.initialState),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.filters,a=e.pagination;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",null,"\u0424\u0438\u043b\u044c\u0442\u0440\u044b:"),r.a.createElement(J,{filters:t,pagination:a,onChangeFilter:this.onChangeFilter,onChangePagination:this.onChangePagination,onReset:this.onReset})))),r.a.createElement("div",{className:"col-8"},r.a.createElement(re,{filters:t,pagination:a,onChangePagination:this.onChangePagination}))))}}]),t}(r.a.Component),oe=a(27),se=[{link:"\u0414\u0435\u0442\u0430\u043b\u0438",path:"details"},{link:"\u0412\u0438\u0434\u0435\u043e",path:"videos"},{link:"\u0410\u043a\u0442\u0435\u0440\u044b",path:"actors"}],ce=Object(oe.f)(function(e){var t=e.match;return r.a.createElement("ul",{className:"nav nav-tabs"},se.map(function(e,a){return r.a.createElement("li",{className:"nav-item",key:a},r.a.createElement(X.c,{to:"".concat(t.url,"/").concat(e.path),className:"nav-link"},e.link))}))}),le=a(106),ue=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.movieDetails,t=[{name:"\u0421\u0442\u0430\u0442\u0443\u0441",value:e.status},{name:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430",value:e.release_date},{name:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"".concat(e.runtime,"\u043c\u0438\u043d\u0443\u0442")},{name:"\u042f\u0437\u044b\u043a \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u0430",value:e.original_language},{name:"\u0421\u0442\u0440\u0430\u043d\u0430",value:e.production_countries.map(function(e){return e.name})},{name:"\u0411\u044e\u0434\u0436\u0435\u0442",value:"".concat(e.budget,"$")},{name:"\u0421\u0431\u043e\u0440\u044b",value:"".concat(e.revenue,"$")},{name:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",value:e.production_companies.map(function(e){return e.name})},{name:"\u0416\u0430\u043d\u0440\u044b",value:e.genres.map(function(e){return e.name})}];return r.a.createElement(le.a,null,r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"row"},e.name),r.a.createElement("td",null,"".concat(e.value)))})))}}]),t}(r.a.Component);ue.defaultProps={movieDetails:{production_countries:[],production_companies:[],genres:[]}};var me=a(107),de=function(){return r.a.createElement("div",{className:"row justify-content-center mt-4"},r.a.createElement("div",{className:"col-3"},r.a.createElement(me.a,{color:"primary"})))},pe=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={movieVideos:[],isLoading:!0},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;E.get("/movie/".concat(t.id,"/videos")).then(function(t){e.setState({movieVideos:t.results,isLoading:!1})})}},{key:"render",value:function(){var e=this.state,t=e.movieVideos;return e.isLoading?r.a.createElement(de,null):r.a.createElement("div",{className:"row"},t.map(function(e){return r.a.createElement("div",{className:"col-6",key:e.id},r.a.createElement("iframe",{title:"video",width:"100%",height:"260",src:"https://www.youtube.com/embed/".concat(e.key),frameBorder:"0",allowFullScreen:!0}))}))}}]),t}(r.a.Component),he=Object(oe.f)(pe),ve=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={movieActors:[],isLoading:!0},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;E.get("/movie/".concat(t.id,"/credits")).then(function(t){e.setState({movieActors:t,isLoading:!1})})}},{key:"render",value:function(){var e=this.state,t=e.movieActors;return e.isLoading?r.a.createElement(de,null):t.cast.map(function(e){return e.profile_path&&r.a.createElement(Z,{key:e.id,className:"pr-1 pb-1",alt:"",path:e.profile_path,width:"150px",height:"200px"})})}}]),t}(r.a.Component),ge=Object(oe.f)(ve),be=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.movieDetails;return r.a.createElement("div",{className:"row justify-content-center mt-4"},r.a.createElement("div",{className:"col-9"},r.a.createElement(ce,null),r.a.createElement("div",{className:"content"},r.a.createElement(oe.c,null,r.a.createElement(oe.a,{path:"/movie/:id/details"},r.a.createElement(ue,{movieDetails:e})),r.a.createElement(oe.a,{path:"/movie/:id/videos",component:he}),r.a.createElement(oe.a,{path:"/movie/:id/actors",component:ge})))))}}]),t}(r.a.Component),fe=function(e){var t=e.title,a=e.overview;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,t),r.a.createElement("div",{className:"mb-3"},r.a.createElement(z.a,null),r.a.createElement(K.a,null)),r.a.createElement("p",null,a))},Oe=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={movieDetails:[],isLoading:!0},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;E.get("/movie/".concat(t.id),{params:{language:"ru-RU"}}).then(function(t){e.setState({movieDetails:t,isLoading:!1})})}},{key:"render",value:function(){var e=this.state,t=e.movieDetails,a=e.isLoading;return r.a.createElement("div",{className:"container"},a?r.a.createElement(de,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row justify-content-center mt-4"},r.a.createElement("div",{className:"col-3"},r.a.createElement(Z,{path:t.poster_path,width:"100%",alt:""})),r.a.createElement("div",{className:"col-6"},r.a.createElement(fe,{title:t.title,overview:t.overview}))),r.a.createElement(be,{movieDetails:t})))}}]),t}(r.a.Component),je=new(a(53).a),Ee=r.a.createContext(),ye=r.a.createContext(),_e=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).updateUser=function(t){e.setState({user:t})},e.updateSessionId=function(t){je.set("session_id",t,{path:"/",maxAge:2592e3}),e.setState({session_id:t})},e.toggleLoginModal=function(){e.setState(function(e){return{showLoginModal:!e.showLoginModal}})},e.handleLogOut=function(){var t=e.state.session_id;E.delete("/authentication/session",{body:{session_id:t}}).then(function(){e.onLogOut()})},e.onLogOut=function(){je.remove("session_id"),e.setState(Object(s.a)({},e.initialState))},e.getFavoriteList=function(){var t=e.state.session_id;return E.get("/account/".concat(e.state.user.id,"/favorite/movies"),{params:{session_id:t}}).then(function(t){e.setState({favorite_movies:t.results})})},e.getWatchList=function(){var t=e.state.session_id;return E.get("/account/".concat(e.state.user.id,"/watchlist/movies"),{params:{session_id:t}}).then(function(t){e.setState({watchlist:t.results})})},e.getUser=function(e){return E.get("/account",{params:{session_id:e}})},e.initialState={user:null,session_id:null,showLoginModal:!1,favorite_movies:[],watchlist:[]},e.state=Object(s.a)({},e.initialState),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=je.get("session_id");t&&this.getUser(t).then(function(a){e.updateUser(a),e.updateSessionId(t),e.getFavoriteList(),e.getWatchList()})}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.session_id,n=e.watchlist,i=e.showLoginModal,o=e.favorite_movies;return r.a.createElement(X.a,null,r.a.createElement(Ee.Provider,{value:{user:t,updateUser:this.updateUser,getUser:this.getUser,favorite_movies:o,getFavoriteList:this.getFavoriteList,watchlist:n,getWatchList:this.getWatchList}},r.a.createElement(ye.Provider,{value:{session_id:a,updateSessionId:this.updateSessionId,handleLogOut:this.handleLogOut,showLoginModal:i,toggleLoginModal:this.toggleLoginModal}},r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement(oe.a,{exact:!0,path:"/",component:ie}),r.a.createElement(oe.a,{path:"/movie/:id",component:Oe})))))}}]),t}(r.a.Component);a(86),a(87);o.a.render(r.a.createElement(_e,null),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.856d6526.chunk.js.map